<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>OpenVX User Kernel Tiling Extension: User Kernel Tiling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenVX_Color_119x55.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenVX User Kernel Tiling Extension
   &#160;<span id="projectnumber">r29628</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">User Kernel Tiling </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The User Kernel Tiling facility enables optimizations of the user nodes (e.g. locality of execution or parallelism) when performing computation on the image data. Modern processors have a diverse memory hierarchy that varies from relatively small but fast and expensive memory to relatively large but slow and inexpensive memory. Image data is typically too large to fit into the fast but small memory. The ability to break the image data into smaller-sized rectangular units allows for optimized computation on these smaller units with fast memory access or parallel execution of a user node on multiple image ``tiles'' simultaneously. The OpenVX Graph Manager possesses the knowledge about the memory hierarchy of the target and is hence in a position to break the image data into smaller units for memory optimization. Knowledge of the memory access pattern of an algorithm is key for the graph manager to enable optimizations.</p>
<p>As with conventional User Kernels, Tiling User Kernels will typically be loaded and executed on HLOS/CPU-compatible targets, not on remote processors or other accelerators &mdash; the intent of this extension is to allow efficient scheduling and memory transfer between accelerators and user functions, not to provide code to run on an accelerator, since this capability is necessarily vendor-specific. This specification does not mandate what constitutes compatible platforms. </p>
<h1><a class="anchor" id="sec_purpose"></a>
Purpose</h1>
<p>The purpose of having User Kernel Tiling Functions is to: </p>
<ul>
<li>Provide a mechanism for user-kernel programmers to communicate enough information about their computation to enable OpenVX implementations to perform some optimizations that take advantage of locality in the user-node computation, and enable parallelism of execution across local data sets. </li>
<li>Define a portable method to enable tiling on compatible platforms. </li>
<li>Define a simple way to enable users to write image processing functions.</li>
</ul>
<h1><a class="anchor" id="sec_basic_design"></a>
Basic Design</h1>
<p>The user kernel tiling facility is largely composed of two components: </p>
<ul>
<li>User Node informs Graph Manager &mdash; The author of the tilable user kernel informs the graph manager about the data requirements of the algorithm implemented by the kernel. This is primarily done by setting attributes on the kernel (for all nodes of this type), or on the node (for that particular node). This is usually done at kernel definition time (for kernel attributes) or at node creation time (for node attributes). Only single-plane images are supported as input or output arguments to tiled user nodes in this version of the specification. </li>
<li>Graph Manager informs User Node &mdash; The graph manager informs the user kernel code about the rectangular sub-image, or &ldquo;tile&rdquo;, on which the user kernel code will run. This is primarily done via macros that the user kernel code can call to get this information at run time for a particular invocation of the user code. In this version of the tiling extension, the user functions are expected to generate the same output pixels in each output image, and to rely on the corresponding pixels of the input image, potentially with the addition of some nearby &ldquo;neighborhood&rdquo; pixels, to perform this calculation. The effect of a tiling user kernel that writes to its input images is implementation-defined.</li>
</ul>
<h1><a class="anchor" id="sec_two_functions"></a>
Two Kernel Functions</h1>
<p>The creator of the tiled user kernel must provide a kernel function to perform the actual computation. Optionally, the kernel creator may provide a second function with different edge-condition checks. </p>
<ul>
<li>One of the functions is referred to as the &ldquo;flexible&rdquo; function, and it may be called with irregular tile sizes and near the edge of the tile's parent image, so it must fully check all edge conditions to handle such issues. </li>
<li>The second function is referred to as the &ldquo;fast&rdquo; function, and it will only be called with tile sizes and pixel alignments that are multiples of the user-specified &ldquo;tile block size&rdquo;, and will not be called in a location that would cause references to the neighborhood region to fall outside the image.</li>
</ul>
<p>If the kernel creator only provides the fast function, some of the output image (near the edges) will not be computed if the fast function cannot be safely called at the edge of these images. If the kernel creator only provides the flexible function, it will be called at all appropriate locations of the image, including near the edges. The OpenVX implementation should still attempt to call the flexible function with regular tile sizes and alignments where possible. If both functions are provided, the fast function should be used as much as possible given its restrictions, and the flexible function will be called elsewhere.</p>
<h1><a class="anchor" id="sec_glossary"></a>
Glossary</h1>
<p>Terms and Definitions of the Extension: </p>
<ul>
<li>Tile &mdash; The rectangle of destination pixels to be computed by the user function, whose size is less than or equal to the rectangle of the entire image. This value is determined by the OpenVX runtime. Every tile that is provided to the user node will be fully contained within the image, and no pixel of the image will be included in more than one tile. The user cannot rely on the order or concurrency of tile processing. </li>
<li>Output tile block &mdash; The output tile block size imposes a coordinate grid over the image that is aligned with the top-left corner of the output image. The fast function will always be called on a tile that is aligned to this grid, and the dimensions of this tile are integer multiples of the tile block size. That is, the fast function is invoked on a tile consisting of a whole number of tile blocks. There are no restrictions on the size and alignment of a tile given to the flexible function. It is expected that the tile block size be small &mdash; potentially a single pixel &mdash; in order to maximize opportunities to use a &ldquo;fast&rdquo; function. The tile size should generally be much larger, and chosen by the graph manager in an implementation-specific way to make good use of cache sizes and memory transfer and to limit function call overhead, while still offering the potential for reduced memory footprint and parallel execution. </li>
<li>Input tile block &mdash; The input tile block defines the dimension of a tile block in the input image corresponding to an output tile block. In OpenVX 1.0, this value is unconditionally regarded to be same as the output tile block size. </li>
<li>Fast function &mdash; A function provided by the user which will be invoked only with tiles whose coordinates are aligned to, and whose dimensions are integer multiples of, the tile block size, and which will never attempt to access pixels that lie beyond the bounds of the input images (due to neighborhood). The expectation is that the user may be able to provide a more efficient implementation if the function is known to be invoked on coordinate-aligned data. For this reason, the implementation may be expected to invoke the fast function preferentially over the flexible function. If only the fast function is provided and the flexible function is not, the regions of the image which do not meet the requirements of running the fast function will not be processed. Note that coordinate alignment does not imply memory alignment, which is determined in part by image stride and is implementation-defined, though many implementations will define a relationship between coordinate and memory alignment. There is no guarantee of evaluation order of the functions, and on some implementations multiple invocations may occur concurrently. The fast function is a function pointer of type <code><a class="el" href="d1/dd0/group__group__tiling.html#ga488342063cb1bd288db0be18c2b0d3da">vx_tiling_kernel_f</a></code>. </li>
<li>Flexible function &mdash; A function provided by the user which can be used to process tiles that are not constrained by tile block size, and &mdash; with <code><a class="el" href="d1/dd0/group__group__tiling.html#gga28b9808e1bf5ad52f2697dd9469d683bac8196a629e7d3ed3c71310961e7ce0d0">VX_BORDER_MODE_SELF</a></code> &mdash; which may rely on a neighborhood that corresponds to pixels beyond the bounds of the input images. The user function should be capable of running at arbitrary coordinate alignment. If only the flexible function is provided, this will be invoked on tile-block aligned tiles as well as unaligned tiles. The user can expect aligned regions to be invoked preferentially even when only a flexible function is provided. At least one of the fast and flexible functions must be provided. The flexible function is a function pointer of type <code><a class="el" href="d1/dd0/group__group__tiling.html#ga488342063cb1bd288db0be18c2b0d3da">vx_tiling_kernel_f</a></code>. </li>
<li>Input neighborhood &mdash; The additional pixels surrounding the tile in the input images that are required in order to compute the output tile. The top, bottom, left and right values correspond to the offset of the edges of the neighborhood defined relative to the tile being processed. For example, a Sobel kernel requiring 3 by 3 pixels centered on the output would have an input neighborhood of (-1,1,-1,1). Functions which operate on only a single pixel have an input neighborhood of (0,0,0,0). </li>
<li>Output neighborhood &mdash; The additional (previously computed) pixels surrounding the tile in the output image needed to compute the output tile. In OpenVX 1.0, this value is unconditionally regarded as zero in all four directions (top, bottom, left, right). </li>
<li>Border mode &mdash; Defines the behavior of the OpenVX runtime against the determination of tiles near the image edge for non-zero neighborhood sizes. If the border mode is <code>VX_BORDER_MODE_SELF</code>, the flexible function will be invoked on tiles near the image border that would require neighborhood access beyond the image bounds, and this function is responsible for accessing any pixels whose coordinates are invalid. If the border mode is <code>VX_BORDER_MODE_UNDEFINED</code>, the graph manager will ensure that the user functions are not invoked on coordinates that, because of neighborhood, require access outside the image area. </li>
<li>Tile memory &mdash; A facility for per-tile memory allocation. The amount allocated will be the amount requested via the <code><a class="el" href="d1/dd0/group__group__tiling.html#gga30eb6112cbbb77b13f798374ef074d94aaccad44fbb64e801d7bbae1a48cd20bc">VX_KERNEL_ATTRIBUTE_TILE_MEMORY_SIZE</a></code> attribute (which may be zero) multiplied by the number of tile blocks in the tile being processed, and the allocation will be passed to the user-provided functions through the <code>tile_memory</code> parameter. The size allocated for that function invocation is provided via the <code>tile_memory_size</code> parameter. The valid lifetime of the given pointer is per invocation of the user function that processes a tile. This allocation is provided <em>per tile</em> &mdash; and therefore two parallel invocations of the user tiling functions will receive different allocations. This is distinct from the per-node memory managed via the <code>VX_KERNEL_ATTRIBUTE_LOCAL_DATA_SIZE</code> and <code>VX_KERNEL_ATTRIBUTE_LOCAL_DATA_PTR</code> kernel attributes.</li>
</ul>
<h1><a class="anchor" id="sec_summary"></a>
Summary of user function calls</h1>
<p>The following tables describe the circumstances under which each user function will be invoked, categorized by the border mode settings of the node.</p>
<h2><a class="anchor" id="sec_by_functions"></a>
User function invocation according to which functions are defined</h2>
<table class="doxtable">
<tr>
<th>Functions provided </th><th>VX_BORDER_MODE_UNDEFINED </th><th>VX_BORDER_MODE_SELF  </th></tr>
<tr>
<td>If only the FAST function is defined...</td><td>The Fast function is invoked on the largest aligned image subset that avoids out-of-bounds accesses. Other pixels are not processed.</td><td>Prohibited (graph validation fails). </td></tr>
<tr>
<td>If only the FLEXIBLE function is defined...</td><td>The flexible function is invoked on the largest image subset that ensures neighborhood accesses are within bounds, irrespective of alignment. Other pixels are not processed.</td><td>The flexible function is invoked for all pixels in the output image irrespective of alignment, including pixels that correspond to neighborhood accesses beyond the image bounds. </td></tr>
<tr>
<td>If both the FAST and FLEXIBLE functions are defined...</td><td>The fast function is invoked on the largest aligned image subset that avoids out-of-bounds neighborhood accesses. The flexible function is invoked for the remaining pixels that do not require out-of-bounds accesses.</td><td>The fast function is invoked on the largest aligned image subset that avoids out-of-bounds neighborhood accesses. The flexible function is invoked on remaining pixels. </td></tr>
</table>
<p>Note that a missing flexible function when using <code>VX_BORDER_MODE_SELF</code> is treated as an error even if the fast function might never be expected to be called (for example, if the image size is divisible by the tile block size and the neighborhood is 0).</p>
<h2><a class="anchor" id="sec_by_pixels"></a>
User function invocation according to which pixels are being processed</h2>
<table class="doxtable">
<tr>
<th>Pixels to process </th><th>VX_BORDER_MODE_UNDEFINED </th><th>VX_BORDER_MODE_SELF  </th></tr>
<tr>
<td>Pixels that require access beyond the image bounds (due to neighborhood) </td><td>Not processed by any function </td><td>Processed by the flexible function, which must be provided </td></tr>
<tr>
<td>Pixels that require access only within the image, but in an unaligned tile </td><td>Processed by the flexible function (if provided) and not processed otherwise </td><td>Processed by the flexible function, which must be provided </td></tr>
<tr>
<td>Pixels within an aligned tile that do not access beyond the image bounds </td><td>Processed by the fast function if provided, otherwise by the flexible function </td><td>Processed by the fast function if provided, otherwise by the flexible function </td></tr>
</table>
<h1><a class="anchor" id="sec_add_kernel"></a>
Adding a Tiling Kernel Function</h1>
<div class="fragment"><div class="line">    vx_status status = VX_SUCCESS;</div>
<div class="line">    vx_uint32 k = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (k = 0; k &lt; dimof(tiling_kernels); k++)</div>
<div class="line">    {</div>
<div class="line">        vx_kernel kernel = <a class="code" href="d1/dd0/group__group__tiling.html#ga0dd01a472aef813609f93410b0843b6d">vxAddTilingKernel</a>(context,</div>
<div class="line">                tiling_kernels[k].name,</div>
<div class="line">                tiling_kernels[k].enumeration,</div>
<div class="line">                tiling_kernels[k].flexible_function,</div>
<div class="line">                tiling_kernels[k].fast_function,</div>
<div class="line">                tiling_kernels[k].num_params,</div>
<div class="line">                tiling_kernels[k].input_validator,</div>
<div class="line">                tiling_kernels[k].output_validator);</div>
<div class="line">        <span class="keywordflow">if</span> (kernel)</div>
<div class="line">        {</div>
<div class="line">            vx_uint32 p = 0;</div>
<div class="line">            <span class="keywordflow">for</span> (p = 0; p &lt; tiling_kernels[k].num_params; p++)</div>
<div class="line">            {</div>
<div class="line">                status |= vxAddParameterToKernel(kernel, p,</div>
<div class="line">                            tiling_kernels[k].parameters[p].direction,</div>
<div class="line">                            tiling_kernels[k].parameters[p].data_type,</div>
<div class="line">                            tiling_kernels[k].parameters[p].state);</div>
<div class="line">            }</div>
<div class="line">            status |= vxSetKernelAttribute(kernel, <a class="code" href="d1/dd0/group__group__tiling.html#gga30eb6112cbbb77b13f798374ef074d94a9b36b61ce8fac912e3a144e9541ebe86">VX_KERNEL_ATTRIBUTE_INPUT_NEIGHBORHOOD</a>, &amp;tiling_kernels[k].nbhd, <span class="keyword">sizeof</span>(<a class="code" href="d1/dd0/group__group__tiling.html#d1/df3/structvx__neighborhood__size__t">vx_neighborhood_size_t</a>));</div>
<div class="line">            status |= vxSetKernelAttribute(kernel, <a class="code" href="d1/dd0/group__group__tiling.html#gga30eb6112cbbb77b13f798374ef074d94aaa50067f392ebd401411c301378fd8e7">VX_KERNEL_ATTRIBUTE_OUTPUT_TILE_BLOCK_SIZE</a>, &amp;tiling_kernels[k].block, <span class="keyword">sizeof</span>(<a class="code" href="d1/dd0/group__group__tiling.html#d3/dd0/structvx__tile__block__size__t">vx_tile_block_size_t</a>));</div>
<div class="line">            status |= vxSetKernelAttribute(kernel, <a class="code" href="d1/dd0/group__group__tiling.html#gga30eb6112cbbb77b13f798374ef074d94a92695ed9a36594f2d32e5a9be0efce50">VX_KERNEL_ATTRIBUTE_BORDER</a>, &amp;tiling_kernels[k].border, <span class="keyword">sizeof</span>(vx_border_mode_t));</div>
<div class="line">            <span class="keywordflow">if</span> (status != VX_SUCCESS)</div>
<div class="line">            {</div>
<div class="line">                vxRemoveKernel(kernel);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                status = vxFinalizeKernel(kernel);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (status != VX_SUCCESS)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Failed to publish kernel %s\n&quot;</span>, tiling_kernels[k].name);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment --> <h1><a class="anchor" id="sec_example_kernel"></a>
Example Kernels</h1>
<p>Users can add simple filter-style kernels similar to this example of a Gaussian Blur. </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> gaussian_image_tiling_fast(<span class="keywordtype">void</span> * <a class="code" href="d1/dd0/group__group__tiling.html#gaa12fdf5b38383d2f8b61d6ddd7e416a0">VX_RESTRICT</a> parameters[<a class="code" href="d1/dd0/group__group__tiling.html#gaa12fdf5b38383d2f8b61d6ddd7e416a0">VX_RESTRICT</a>],</div>
<div class="line">                                <span class="keywordtype">void</span> * VX_RESTRICT tile_memory,</div>
<div class="line">                                vx_size tile_memory_size)</div>
<div class="line">{</div>
<div class="line">    vx_uint32 x, y;</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[0];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *out = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[1];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga9d351f6ecc1c024dcb694b11ded39342">vxTileHeight</a>(out, 0); y += <a class="code" href="d1/dd0/group__group__tiling.html#gaffbb60b17ca86b855ef6ac18d69137c3">vxTileBlockHeight</a>(out))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga279bc341b7123e84f5685620c3e3d66b">vxTileWidth</a>(out, 0); x += <a class="code" href="d1/dd0/group__group__tiling.html#ga2049caaadd68caa6e1ffe4862d5a496a">vxTileBlockWidth</a>(out))</div>
<div class="line">        {</div>
<div class="line">            vx_uint32 sum = 0;</div>
<div class="line">            <span class="comment">/* this math covers a {-1,1},{-1,1} neighborhood and a block of 1x1.</span></div>
<div class="line"><span class="comment">             * an internal set of for loops could have been placed here instead.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y, -1, -1);</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y,  0, -1) &lt;&lt; 1;</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y, +1, -1);</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y, -1,  0) &lt;&lt; 1;</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y,  0,  0) &lt;&lt; 2;</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y, +1,  0) &lt;&lt; 1;</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y, -1, +1);</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y,  0, +1) &lt;&lt; 1;</div>
<div class="line">            sum += <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in, 0, x, y, +1, +1);</div>
<div class="line">            sum &gt;&gt;= 4;</div>
<div class="line">            <span class="keywordflow">if</span> (sum &gt; 255)</div>
<div class="line">                sum = 255;</div>
<div class="line">            <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, out, 0, x, y, 0, 0) = (vx_uint8)sum;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p> Note that this function has a non-zero neighborhood, and performs no special checking for running at the image borders. Therefore it must be used as a &ldquo;fast&rdquo; function and, unless a corresponding &ldquo;flexible&rdquo; function is provided, must be used with VX_BORDER_MODE_UNDEFINED.</p>
<p>Users can also add more complex addressing functionality in order to optimize their code in this example which uses two inputs: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> add_image_tiling(<span class="keywordtype">void</span> * VX_RESTRICT parameters[VX_RESTRICT],</div>
<div class="line">                      <span class="keywordtype">void</span> * VX_RESTRICT tile_memory,</div>
<div class="line">                      vx_size tile_memory_size)</div>
<div class="line">{</div>
<div class="line">    vx_uint32 i,j;</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in0 = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[0];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in1 = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[1];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *out = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[2];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0u; j &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga9d351f6ecc1c024dcb694b11ded39342">vxTileHeight</a>(out,0); j+=<a class="code" href="d1/dd0/group__group__tiling.html#gaffbb60b17ca86b855ef6ac18d69137c3">vxTileBlockHeight</a>(out))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0u; i &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga279bc341b7123e84f5685620c3e3d66b">vxTileWidth</a>(out,0); i+=<a class="code" href="d1/dd0/group__group__tiling.html#ga2049caaadd68caa6e1ffe4862d5a496a">vxTileBlockWidth</a>(out))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* this math covers a 1x1 block and has no neighborhood */</span></div>
<div class="line">            vx_uint16 pixel = <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in0, 0, i, j, 0, 0) +</div>
<div class="line">                              <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in1, 0, i, j, 0, 0);</div>
<div class="line">            <span class="keywordflow">if</span> (pixel &gt; INT16_MAX)</div>
<div class="line">                pixel = INT16_MAX;</div>
<div class="line">            <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_int16, out, 0, i, j, 0, 0) = (vx_int16)pixel;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p> With a tile block width and height of one, combined with the zero neighborhood, this function can be used as a &ldquo;flexible&rdquo; function. With a larger tile block size, this is a &ldquo;fast&rdquo; function.</p>
<p>For better performance, the user might split this into two functions. Firstly, a &ldquo;fast&rdquo; function: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> add_image_tiling_fast(<span class="keywordtype">void</span> * VX_RESTRICT parameters[VX_RESTRICT],</div>
<div class="line">                           <span class="keywordtype">void</span> * VX_RESTRICT tile_memory,</div>
<div class="line">                           vx_size tile_memory_size)</div>
<div class="line">{</div>
<div class="line">    vx_uint32 i,j,ii,jj;</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in0 = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[0];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in1 = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[1];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *out = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[2];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0u; j &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga9d351f6ecc1c024dcb694b11ded39342">vxTileHeight</a>(out,0); j+=16)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (jj = 0u; jj &lt; 16u; ++jj)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">for</span> (i = 0u; i &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga279bc341b7123e84f5685620c3e3d66b">vxTileWidth</a>(out,0); i+=16)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">for</span> (ii = 0u; ii &lt; 16u; ++ii) {</div>
<div class="line">                    <span class="comment">/* this math covers a 1x1 block and has no neighborhood */</span></div>
<div class="line">                    vx_uint16 pixel = <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in0, 0, i+ii, j+jj, 0, 0) +</div>
<div class="line">                        <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in1, 0, i+ii, j+jj, 0, 0);</div>
<div class="line">                    <span class="keywordflow">if</span> (pixel &gt; INT16_MAX)</div>
<div class="line">                        pixel = INT16_MAX;</div>
<div class="line">                    <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_int16, out, 0, i+ii, j+jj, 0, 0) = (vx_int16)pixel;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This fast function has a fixed 16 by 16 tile block size, the loops of which the compiler may be able to unroll or otherwise optimize &mdash; the pixel access macro is designed to give the compiler the best chance of doing this. Less portable code may be able to rely on byte alignment and fast memory accesses, and perform SIMD operations in the fast function to maximize the host CPU performance.</p>
<p>In addition to performance optimization, many algorithms have tile block size requirements due to spatial effects on pixels. For example, ordered dithering, UV upsampling and debayering all require pixels to be processed differently according to location within a repeating block.</p>
<p>This would be complemented by a corresponding &ldquo;flexible&rdquo; function: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> add_image_tiling_flexible(<span class="keywordtype">void</span> * VX_RESTRICT parameters[VX_RESTRICT],</div>
<div class="line">                               <span class="keywordtype">void</span> * VX_RESTRICT tile_memory,</div>
<div class="line">                               vx_size tile_memory_size)</div>
<div class="line">{</div>
<div class="line">    vx_uint32 i,j;</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in0 = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[0];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *in1 = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[1];</div>
<div class="line">    <a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *out = (<a class="code" href="d1/dd0/group__group__tiling.html#d6/d79/structvx__tile__t">vx_tile_t</a> *)parameters[2];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0u; j &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga9d351f6ecc1c024dcb694b11ded39342">vxTileHeight</a>(out,0); ++j)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0u; i &lt; <a class="code" href="d1/dd0/group__group__tiling.html#ga279bc341b7123e84f5685620c3e3d66b">vxTileWidth</a>(out,0); ++i)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* this math covers a 1x1 block and has no neighborhood */</span></div>
<div class="line">            vx_uint16 pixel = <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in0, 0, i, j, 0, 0) +</div>
<div class="line">                              <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_uint8, in1, 0, i, j, 0, 0);</div>
<div class="line">            <span class="keywordflow">if</span> (pixel &gt; INT16_MAX)</div>
<div class="line">                pixel = INT16_MAX;</div>
<div class="line">            <a class="code" href="d1/dd0/group__group__tiling.html#ga7d2965f5f3a5b191a87e66064c85ebd0">vxImagePixel</a>(vx_int16, out, 0, i, j, 0, 0) = (vx_int16)pixel;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p> This function ignores the tile block and processes the tile given to it one pixel at a time. It is expected that the flexible function should be called for much less of the image than the fast function, so this overhead should be considered acceptable. This applies whether the flexible function is invoked because of tile alignment or in order to support out-of-bounds accesses, and users writing portable OpenVX code should be able to devote effort to the fast function. However, it is legal for an implementation with minimal tiling support to process an entire image in a single, possibly unaligned, tile for portability reasons.</p>
<h1><a class="anchor" id="sec_diagrams"></a>
Example diagrams</h1>
<h2><a class="anchor" id="sec_noneighbors"></a>
A trivial kernel</h2>
<p>The simplest user functions (that depend on any inputs at all) will read only the pixel in the input image(s) that correspond(s) to the pixel in the output image(s). Such a function requires a neighborhood size of 0 in each direction. If only a single image is processed at a time, the tile block size should be set to 1 by 1. Here we show the tile block &mdash; and therefore minimum tile size &mdash; in blue (trivially).</p>
 
<table style="border: 1px solid black; border-collapse: collapse"><tr style="height: 20px; border: 1px solid black"><td style="background-color: #0000FF; width: 20px"></td></tr></table>
<h2><a class="anchor" id="sec_neighbors"></a>
A user function with a neighborhood</h2>
<p>A more complex user function may require source pixels surrounding the coordinate of the output pixel in order to work. For example, a Sobel filter requires the a three by three block centered on the current pixel. Here we show the neighborhood in cyan around the single pixel to be processed, in blue &mdash; each square represents one pixel. This neighborhood would be specified as &ldquo;-1,1,-1,1&rdquo;.</p>
 
<table style="border: 1px solid black; border-collapse: collapse">
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
</table>
<h2><a class="anchor" id="sec_fast_neighbors"></a>
A faster function with a neighborhood</h2>
<p>The user may choose to optimize the same function by making it work on blocks of 4 by 4 pixels, rather than one pixel at a time. In this case, the tile block should be set to 4 by 4. Depending on the implementation, the neighborhood may be unmodified. If a fast function is defined that uses this 4 by 4 tile block, the user should still offer a flexible function that can process tiles that are not aligned to this 4 by 4 grid, since otherwise some portions of the image area may be left unprocessed. Here we show the 4 by 4 tile block with a single pixel neighborhood, specified in the same way as before.</p>
 
<table style="border: 1px solid black; border-collapse: collapse">
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
</tr>
</table>
<p>Tiles processed using the &ldquo;fast&rdquo; function will be aligned to a 4x4 grid, and some multiple of this tile block size; the fast function will be able to access valid pixels from the neighborhood area (which will surround the complete tile by a single pixel).</p>
<h2><a class="anchor" id="sec_tile_vs_tileblock"></a>
Tiles and tile blocks</h2>
<p>Consider a simple function that has no neighborhood - let us say a function which posterizes the image by replicating the top four bits of an 8-bit input into the lower four bits:</p>
<p><code>out(x,y) = (in(x,y) &amp; 0xF0) | (in(x,y) &gt;&gt; 4)</code></p>
<p>If the implementation guarantees 32-bit alignment for the start of each row &mdash; <em>not</em> something guaranteed by OpenVX, but likely common &mdash; then the user could write a &ldquo;fast&rdquo; function which processes four pixels at once, using a 32-bit integer. This function would then have a 4 by 1 &ldquo;tile block&rdquo;.</p>
<p>In processing a 12 by 6 image using this function, the graph manager might choose to break the image into three rectangular &ldquo;tiles&rdquo;. An example in shown in different colors below. The fast function can be called for each of these tiles. It is up to a graph manager to decide different arrangements, and to decide the order in which the fast function would be invoked for these tiles &mdash; including whether the tiles are evaluated in parallel &mdash; but the tile block size guarantees that the tiles will be multiples of 4 by 1 pixels.</p>
 
<table style="border: 1px solid black; border-collapse: collapse">
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
</table>
<p>Next, consider what happens if the image is 14 by 6 pixels:</p>
 
<table style="border: 1px solid black; border-collapse: collapse">
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
</table>
<p>In this case, the 2-by-6 strip at the right edge of the image cannot be processed by tile-block-aligned tiles, and therefore the fast function cannot process these pixels. If the user has provided a &ldquo;flexible&rdquo; function, that function will be used to process these pixels (still provided with rectangular tiles of data).</p>
<h2><a class="anchor" id="sec_border_example"></a>
Example of borders</h2>
<p>We might imagine a function that is similar to the above, but which requires access to all the source pixels surrounding the coordinate of the destination pixel in order to operate. While it may process a single pixel, the user may choose to perform a similar optimization to that discussed in the previous section, resulting in a 4-by-1 tile block with a one-pixel border neighborhood around it.</p>
<p>With the user node's border mode set to <code>VX_BORDER_MODE_UNDEFINED</code>, the graph manager might choose to break the same 14 by 8 image into the following tiles for the user functions to process:</p>
 
<table style="border: 1px solid black; border-collapse: collapse">
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFFFF; width: 20px; border: 1px solid black"></td>
</tr>
</table>
<p>In this case, the white pixels at the image edge are not processed at all. The red tile is aligned to tile blocks, and can be processed with a fast function, if one is provided (otherwise the flexible function is used). The blue and green tiles do not start on (blue tile) or end on (green tile) a 4 by 1 tile block grid, so these pixels must be processed by the flexible function. If no flexible function is provided, these pixels will not be processed.</p>
<p>With the user node's border mode set to <code>VX_BORDER_MODE_SELF</code>, the graph manager might choose to break the same 14 by 8 image into the following tiles for the user functions to process:</p>
 
<table style="border: 1px solid black; border-collapse: collapse">
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FFFF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FF0000; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
<tr style="height: 20px">
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #0000FF; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #FFFF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
<td style="background-color: #00FF00; width: 20px; border: 1px solid black"></td>
</tr>
</table>
<p>With <code>VX_BORDER_MODE_SELF</code>, the flexible function <em>must</em> be provided. In this example, only the red tile can be processed by the fast function (if provided), since only this tile is aligned to a tile block boundary and has no requirements on pixels beyond the image borders. The blue, cyan and yellow regions are aligned to the tile block boundary, but must be processed by the flexible function because the neighborhood of these pixels extends beyond the image boundary. The green tile is additionally not aligned to the tile block size.</p>
<h1><a class="anchor" id="sec_tiling_coding_guidelines"></a>
Informative Coding Guidelines</h1>
<p>Tiled user kernel functions should be coded in a very specific manner to maintain the requirement of <em>data independence</em> in that all blocks should be computed in a <em>functionally-independent</em> manner. This allows the implementation greater flexibility in optimization choices. These informal requirements include: </p>
<ul>
<li>Avoid using global shared memory. </li>
<li>Avoid using blocking access protected mechanisms (semaphores, etc). </li>
<li>Avoid using dynamic memory allocation functions at runtime. </li>
<li>Avoid calling other functions internally in the tile function. </li>
<li>Do try to write the your loops in an efficient manner for your compiler environment.  </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
